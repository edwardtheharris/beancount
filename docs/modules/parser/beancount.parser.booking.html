

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>beancount.parser.booking &mdash; Beancount 2.2.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="beancount.parser.cmptest" href="beancount.parser.cmptest.html" />
    <link rel="prev" title="beancount.parser.booking_method" href="beancount.parser.booking_method.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Beancount
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../manual/index.html">Beancount Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Beancount Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core/index.html">Beancount Core</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Parser</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="parser.html">parser.parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="printer.html">parser.printer</a></li>
<li class="toctree-l3"><a class="reference internal" href="beancount.parser.booking_full.html">beancount.parser.booking_full</a></li>
<li class="toctree-l3"><a class="reference internal" href="beancount.parser.booking_method.html">beancount.parser.booking_method</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">beancount.parser.booking</a></li>
<li class="toctree-l3"><a class="reference internal" href="beancount.parser.cmptest.html">beancount.parser.cmptest</a></li>
<li class="toctree-l3"><a class="reference internal" href="beancount.parser.grammar.html">beancount.parser.grammar</a></li>
<li class="toctree-l3"><a class="reference internal" href="beancount.parser.hashsrc.html">beancount.parser.hashsrc</a></li>
<li class="toctree-l3"><a class="reference internal" href="beancount.parser.lexer.html">beancount.parser.lexer</a></li>
<li class="toctree-l3"><a class="reference internal" href="beancount.parser.options.html">beancount.parser.options</a></li>
<li class="toctree-l3"><a class="reference internal" href="beancount.parser.parser.html">Parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="beancount.parser.printer.html">beancount.parser.printer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Beancount</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Beancount Modules</a> &raquo;</li>
        
          <li><a href="index.html">Parser</a> &raquo;</li>
        
      <li>beancount.parser.booking</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/modules/parser/beancount.parser.booking.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-beancount.parser.booking">
<span id="beancount-parser-booking"></span><h1>beancount.parser.booking<a class="headerlink" href="#module-beancount.parser.booking" title="Permalink to this headline">¶</a></h1>
<p>Algorithms for ‘booking’ inventory, that is, the process of finding a
matching lot when reducing the content of an inventory.</p>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#beancount.parser.booking.book" title="beancount.parser.booking.book"><code class="xref py py-obj docutils literal notranslate"><span class="pre">book</span></code></a>(incomplete_entries, options_map)</p></td>
<td><p>Book inventory lots and complete all positions with incomplete numbers.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#beancount.parser.booking.validate_inventory_booking" title="beancount.parser.booking.validate_inventory_booking"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_inventory_booking</span></code></a>(entries, …)</p></td>
<td><p>Validate that no position at cost is allowed to go negative.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#beancount.parser.booking.validate_missing_eliminated" title="beancount.parser.booking.validate_missing_eliminated"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_missing_eliminated</span></code></a>(entries, …)</p></td>
<td><p>Validate that all the missing bits of postings have been eliminated.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#beancount.parser.booking.BookingError" title="beancount.parser.booking.BookingError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BookingError</span></code></a>(source, message, entry)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="beancount.parser.booking.BookingError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">BookingError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking.BookingError" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="beancount.parser.booking.BookingError.entry">
<em class="property">property </em><code class="sig-name descname">entry</code><a class="headerlink" href="#beancount.parser.booking.BookingError.entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.booking.BookingError.message">
<em class="property">property </em><code class="sig-name descname">message</code><a class="headerlink" href="#beancount.parser.booking.BookingError.message" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.booking.BookingError.source">
<em class="property">property </em><code class="sig-name descname">source</code><a class="headerlink" href="#beancount.parser.booking.BookingError.source" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking.book">
<code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">book</code><span class="sig-paren">(</span><em class="sig-param">incomplete_entries</em>, <em class="sig-param">options_map</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/beancount/parser/booking.html#book"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#beancount.parser.booking.book" title="Permalink to this definition">¶</a></dt>
<dd><p>Book inventory lots and complete all positions with incomplete numbers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>incomplete_entries</strong> – A list of directives, with some postings possibly left
with incomplete amounts as produced by the parser.</p></li>
<li><p><strong>options_map</strong> – An options dict as produced by the parser.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A pair of</dt><dd><p>entries: A list of completed entries with all their postings completed.
errors: New errors produced during interpolation.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking.validate_missing_eliminated">
<code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">validate_missing_eliminated</code><span class="sig-paren">(</span><em class="sig-param">entries</em>, <em class="sig-param">unused_options_map</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/beancount/parser/booking.html#validate_missing_eliminated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#beancount.parser.booking.validate_missing_eliminated" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that all the missing bits of postings have been eliminated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entries</strong> – A list of directives.</p></li>
<li><p><strong>unused_options_map</strong> – An options map.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of errors.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking.validate_inventory_booking">
<code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">validate_inventory_booking</code><span class="sig-paren">(</span><em class="sig-param">entries</em>, <em class="sig-param">unused_options_map</em>, <em class="sig-param">booking_methods</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/beancount/parser/booking.html#validate_inventory_booking"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#beancount.parser.booking.validate_inventory_booking" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that no position at cost is allowed to go negative.</p>
<p>This routine checks that when a posting reduces a position, existing or not,
that the subsequent inventory does not result in a position with a negative
number of units. A negative number of units would only be required for short
trades of trading spreads on futures, and right now this is not supported.
It would not be difficult to support this, however, but we want to be strict
about it, because being pedantic about this is otherwise a great way to
detect user data entry mistakes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entries</strong> – A list of directives.</p></li>
<li><p><strong>unused_options_map</strong> – An options map.</p></li>
<li><p><strong>booking_methods</strong> – A mapping of account name to booking method, accumulated
in the main loop.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of errors.</p>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="beancount.parser.cmptest.html" class="btn btn-neutral float-right" title="beancount.parser.cmptest" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="beancount.parser.booking_method.html" class="btn btn-neutral float-left" title="beancount.parser.booking_method" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Martin Blais

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>