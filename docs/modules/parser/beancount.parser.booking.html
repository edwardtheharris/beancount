
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>beancount.parser.booking &#8212; Beancount 2.2.1 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="beancount.parser.cmptest" href="beancount.parser.cmptest.html" />
    <link rel="prev" title="beancount.parser.booking_method" href="beancount.parser.booking_method.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-beancount.parser.booking">
<span id="beancount-parser-booking"></span><h1>beancount.parser.booking<a class="headerlink" href="#module-beancount.parser.booking" title="Permalink to this headline">¶</a></h1>
<p>Algorithms for ‘booking’ inventory, that is, the process of finding a
matching lot when reducing the content of an inventory.</p>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#beancount.parser.booking.book" title="beancount.parser.booking.book"><code class="xref py py-obj docutils literal notranslate"><span class="pre">book</span></code></a>(incomplete_entries, options_map)</p></td>
<td><p>Book inventory lots and complete all positions with incomplete numbers.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#beancount.parser.booking.validate_inventory_booking" title="beancount.parser.booking.validate_inventory_booking"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_inventory_booking</span></code></a>(entries, …)</p></td>
<td><p>Validate that no position at cost is allowed to go negative.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#beancount.parser.booking.validate_missing_eliminated" title="beancount.parser.booking.validate_missing_eliminated"><code class="xref py py-obj docutils literal notranslate"><span class="pre">validate_missing_eliminated</span></code></a>(entries, …)</p></td>
<td><p>Validate that all the missing bits of postings have been eliminated.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Classes</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#beancount.parser.booking.BookingError" title="beancount.parser.booking.BookingError"><code class="xref py py-obj docutils literal notranslate"><span class="pre">BookingError</span></code></a>(source, message, entry)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="beancount.parser.booking.BookingError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">BookingError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking.BookingError" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="beancount.parser.booking.BookingError.entry">
<em class="property">property </em><code class="sig-name descname">entry</code><a class="headerlink" href="#beancount.parser.booking.BookingError.entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.booking.BookingError.message">
<em class="property">property </em><code class="sig-name descname">message</code><a class="headerlink" href="#beancount.parser.booking.BookingError.message" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.booking.BookingError.source">
<em class="property">property </em><code class="sig-name descname">source</code><a class="headerlink" href="#beancount.parser.booking.BookingError.source" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking.book">
<code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">book</code><span class="sig-paren">(</span><em class="sig-param">incomplete_entries</em>, <em class="sig-param">options_map</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/beancount/parser/booking.html#book"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#beancount.parser.booking.book" title="Permalink to this definition">¶</a></dt>
<dd><p>Book inventory lots and complete all positions with incomplete numbers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>incomplete_entries</strong> – A list of directives, with some postings possibly left
with incomplete amounts as produced by the parser.</p></li>
<li><p><strong>options_map</strong> – An options dict as produced by the parser.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A pair of</dt><dd><p>entries: A list of completed entries with all their postings completed.
errors: New errors produced during interpolation.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking.validate_missing_eliminated">
<code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">validate_missing_eliminated</code><span class="sig-paren">(</span><em class="sig-param">entries</em>, <em class="sig-param">unused_options_map</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/beancount/parser/booking.html#validate_missing_eliminated"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#beancount.parser.booking.validate_missing_eliminated" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that all the missing bits of postings have been eliminated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entries</strong> – A list of directives.</p></li>
<li><p><strong>unused_options_map</strong> – An options map.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of errors.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking.validate_inventory_booking">
<code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">validate_inventory_booking</code><span class="sig-paren">(</span><em class="sig-param">entries</em>, <em class="sig-param">unused_options_map</em>, <em class="sig-param">booking_methods</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/beancount/parser/booking.html#validate_inventory_booking"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#beancount.parser.booking.validate_inventory_booking" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that no position at cost is allowed to go negative.</p>
<p>This routine checks that when a posting reduces a position, existing or not,
that the subsequent inventory does not result in a position with a negative
number of units. A negative number of units would only be required for short
trades of trading spreads on futures, and right now this is not supported.
It would not be difficult to support this, however, but we want to be strict
about it, because being pedantic about this is otherwise a great way to
detect user data entry mistakes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entries</strong> – A list of directives.</p></li>
<li><p><strong>unused_options_map</strong> – An options map.</p></li>
<li><p><strong>booking_methods</strong> – A mapping of account name to booking method, accumulated
in the main loop.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of errors.</p>
</dd>
</dl>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Beancount</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Beancount Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core/index.html">Beancount Core</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plugins/index.html">Plugins</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Beancount Modules</a><ul>
  <li><a href="index.html">Parser</a><ul>
      <li>Previous: <a href="beancount.parser.booking_method.html" title="previous chapter">beancount.parser.booking_method</a></li>
      <li>Next: <a href="beancount.parser.cmptest.html" title="next chapter">beancount.parser.cmptest</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Martin Blais.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.1.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/modules/parser/beancount.parser.booking.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>