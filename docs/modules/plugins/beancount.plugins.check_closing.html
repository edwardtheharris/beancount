<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>Beancount :: beancount.plugins.check_closing</title>
  

  <link rel="icon" type="image/png" sizes="32x32" href="../../_static/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../_static/img/favicon-16x16.png">
        <link rel="index" title="Index"
              href="../../genindex.html"/>

  <link rel="stylesheet" href="../../_static/css/insegel.css"/>

  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'',
        VERSION:'2.2.1',
        LANGUAGE:'None',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
    };
  </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script>

</head>

<body>
  <div id="insegel-container">
    <header>
      <div id="logo-container">
          
          <a href="../../index.html"><img src="../../_static/img/logo.svg"></a>
          

      </div>
      <div id="project-container">
        <h1>Beancount Documentation</h1>
      </div>
    </header>

    <div id="content-container">

      <div id="main-content-container">
        <div id="main-content-header">
          <h1>beancount.plugins.check_closing</h1>
        </div>
        <div id="main-content">
          
  <div class="section" id="module-beancount.plugins.check_closing">
<span id="beancount-plugins-check-closing"></span><h1>beancount.plugins.check_closing<a class="headerlink" href="#module-beancount.plugins.check_closing" title="Permalink to this headline">¶</a></h1>
<p>A plugin that automatically inserts a balance check on a tagged closing posting.</p>
<p>Some postings are known to the user to be “closing trades”, which means that the
resulting position of the instrument just after the trade should be zero. For
instance, this is the case for most ordinary options trading, only one lot of a
particular instrument is held, and eventually expires or gets sold off in its
entirely. One would like to confirm that, and the way to do this in Beancount is
to insert a balance check.</p>
<p>This plugin allows you to do that more simply, by inserting metadata. For
example, this transaction:</p>
<blockquote>
<div><dl>
<dt>2018-02-16 * “SOLD -14 QQQ 100 16 FEB 18 160 CALL &#64;5.31”</dt><dd><dl class="simple">
<dt>Assets:US:Brokerage:Main:Options     -1400 QQQ180216C160 {2.70 USD} &#64; 5.31 USD</dt><dd><p>closing: TRUE</p>
</dd>
</dl>
<p>Expenses:Financial:Commissions       17.45 USD
Expenses:Financial:Fees               0.42 USD
Assets:US:Brokerage:Main:Cash      7416.13 USD
Income:US:Brokerage:Main:PnL</p>
</dd>
</dl>
</div></blockquote>
<p>Would expand into the following two directives:</p>
<blockquote>
<div><dl class="simple">
<dt>2018-02-16 * “SOLD -14 QQQ 100 16 FEB 18 160 CALL &#64;5.31”</dt><dd><p>Assets:US:Brokerage:Main:Options     -1400 QQQ180216C160 {2.70 USD} &#64; 5.31 USD
Expenses:Financial:Commissions       17.45 USD
Expenses:Financial:Fees               0.42 USD
Assets:US:Brokerage:Main:Cash      7416.13 USD
Income:US:Brokerage:Main:PnL</p>
</dd>
</dl>
<p>2018-02-17 balance Assets:US:Brokerage:Main:Options  0 QQQ180216C160</p>
</div></blockquote>
<p>Insert the closing line when you know you’re closing the position.</p>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#beancount.plugins.check_closing.check_closing" title="beancount.plugins.check_closing.check_closing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_closing</span></code></a>(entries, options_map)</p></td>
<td><p>Expand ‘closing’ metadata to a zero balance check.</p></td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="beancount.plugins.check_closing.check_closing">
<code class="sig-prename descclassname">beancount.plugins.check_closing.</code><code class="sig-name descname">check_closing</code><span class="sig-paren">(</span><em class="sig-param">entries</em>, <em class="sig-param">options_map</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/beancount/plugins/check_closing.html#check_closing"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#beancount.plugins.check_closing.check_closing" title="Permalink to this definition">¶</a></dt>
<dd><p>Expand ‘closing’ metadata to a zero balance check.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entries</strong> – A list of directives.</p></li>
<li><p><strong>unused_options_map</strong> – An options map.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of new errors, if any were found.</p>
</dd>
</dl>
</dd></dl>

</div>


        </div>
      </div>

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <input type="text" name="q" placeholder="Search..." />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">

          
  
    
  
  
    <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Beancount Modules</a></li>
</ul>

  


        </div>

        

      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            
                <li class="footer-element">
                    
                        <a href="../../_sources/modules/plugins/beancount.plugins.check_closing.rst.txt" rel="nofollow"> source</a>
                    
                </li>
            

            

            
        </ul>
        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/Autophagy/insegel">Insegel</a>

        </div>
    </div>

    <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

    <script type="text/javascript">
      $("#menu-toggle").click(function() {
        $("#menu-toggle").toggleClass("toggled");
        $("#side-menu-container").slideToggle(300);
      });
    </script>

</footer> 

</div>

</body>
</html>