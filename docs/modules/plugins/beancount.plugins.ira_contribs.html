<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#2D2D2D" />
  
  <title>Beancount :: beancount.plugins.ira_contribs</title>
  

  <link rel="icon" type="image/png" sizes="32x32" href="../../_static/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../../_static/img/favicon-16x16.png">
        <link rel="index" title="Index"
              href="../../genindex.html"/>

  <link rel="stylesheet" href="../../_static/css/insegel.css"/>

  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'',
        VERSION:'2.2.1',
        LANGUAGE:'None',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
    };
  </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>

  <script src="https://email.tl.fortawesome.com/c/eJxNjUEOgyAQAF8jR7Kw6wIHDh7sP1Cw2mgxgmn6-3JsMqc5zEQfE8dkxOY1KKMUOI3ACFKRJpSW2AAp7ontYIaxI6i7XPJVwyeVfCQ550Os3jLrGSNOLgbdAy6s0PBk2TFNjEbsfq31LB0OnX407pJa5v2faRadwSW63mn5KuLyR9j2tgx3zecanl-55R_-jjPs"></script>

</head>

<body>
  <div id="insegel-container">
    <header>
      <div id="logo-container">
          
          <a href="../../index.html"><img src="../../_static/img/logo.svg"></a>
          

      </div>
      <div id="project-container">
        <h1>Beancount Documentation</h1>
      </div>
    </header>

    <div id="content-container">

      <div id="main-content-container">
        <div id="main-content-header">
          <h1>beancount.plugins.ira_contribs</h1>
        </div>
        <div id="main-content">
          
  <div class="section" id="module-beancount.plugins.ira_contribs">
<span id="beancount-plugins-ira-contribs"></span><h1>beancount.plugins.ira_contribs<a class="headerlink" href="#module-beancount.plugins.ira_contribs" title="Permalink to this headline">¶</a></h1>
<p>Automatically adding IRA contributions postings.</p>
<p>This plugin looks for increasing postings on specified accounts (‘+’ sign for
Assets and Expenses accounts, ‘-‘ sign for the others), or postings with a
particular flag on them and when it finds some, inserts a pair of postings on
that transaction of the corresponding amounts in a different currency. The
currency is intended to be an imaginary currency used to track the number of
dollars contributed to a retirement account over time.</p>
<p>For example, a possible configuration could be:</p>
<blockquote>
<div><dl>
<dt>plugin “beancount.plugins.ira_contribs” “{</dt><dd><p>‘currency’: ‘IRAUSD’,
‘flag’: ‘M’,
‘accounts’: {</p>
<blockquote>
<div><blockquote>
<div><dl class="simple">
<dt>‘Income:US:Acme:Match401k’: (</dt><dd><p>‘Assets:US:Federal:Match401k’,
‘Expenses:Taxes:TY{year}:US:Federal:Match401k’),</p>
</dd>
<dt>(‘C’, ‘Assets:US:Fidelity:PreTax401k:Cash’): (</dt><dd><p>‘Assets:US:Federal:PreTax401k’,
‘Expenses:Taxes:TY{year}:US:Federal:PreTax401k’),</p>
</dd>
</dl>
</div></blockquote>
<p>}</p>
</div></blockquote>
</dd>
</dl>
<p>}”</p>
</div></blockquote>
<p>Note: In this example, the configuration that triggers on the
“Income:US:Acme:Match401k” account does not require a flag for those accounts;
the configuration for the “Assets:US:Fidelity:PreTax401k:Cash” account requires
postings to have a “C” flag to trigger an insertion.</p>
<p>Given a transaction like the following, which would be typical for a salary
entry where the employer is automatically diverting some of the pre-tax money to
a retirement account (in this example, at Fidelity):</p>
<blockquote>
<div><dl class="simple">
<dt>2013-02-15 * “ACME INC       PAYROLL”</dt><dd><p>Income:US:Acme:Salary                   …
…
Assets:US:BofA:Checking                 …
Assets:US:Fidelity:PreTax401k:Cash      620.50 USD
…</p>
</dd>
</dl>
</div></blockquote>
<p>A posting with account ‘Assets:US:Fidelity:PreTax401k:Cash’, which is configured
to match, would be found. The configuration above instructs the plugin to
automatically insert new postings like this:</p>
<blockquote>
<div><dl class="simple">
<dt>2013-02-15 * “ACME INC       PAYROLL”</dt><dd><p>…
Assets:US:Fidelity:PreTax401k:Cash              620.50 USD
M Assets:US:Federal:PreTax401k                 -620.50 IRAUSD
M Expenses:Taxes:TY2013:US:Federal:PreTax401k   620.50 IRAUSD
…</p>
</dd>
</dl>
</div></blockquote>
<p>Notice that the “{year}” string in the configuration’s account names is
automatically replaced by the current year in the account name. This is useful
if you maintain separate tax accounts per yera.</p>
<p>Furthermore, as in the configuration example above, you may have multiple
matching entries to trigger multiple insertions. For example, the employer may
also match the employee’s retirement contribution by depositing some money in
the retirement account:</p>
<blockquote>
<div><dl class="simple">
<dt>2013-02-15 * “BUYMF - MATCH” “Employer match, invested in SaveEasy 2030 fund”</dt><dd><p>Assets:US:Fidelity:Match401k:SE2030   34.793 SE2030 {17.834 USD}
Income:US:Acme:Match401k             -620.50 USD</p>
</dd>
</dl>
</div></blockquote>
<p>In this example the funds get reported as invested immediately (an intermediate
deposit into a cash account does not take place). The plugin configuration would
match against the ‘Income:US:Acme:Match401k’ account and since it increases its
value (the normal balance of an Income account is negative), postings would be
inserted like this:</p>
<blockquote>
<div><dl class="simple">
<dt>2013-02-15 * “BUYMF - MATCH” “Employer match, invested in SaveEasy 2030 fund”</dt><dd><p>Assets:US:Fidelity:Match401k:SE2030              34.793 SE2030 {17.834 USD}
Income:US:Acme:Match401k                        -620.50 USD
M Assets:US:Federal:Match401k                   -620.50 IRAUSD
M Expenses:Taxes:TY2013:US:Federal:Match401k     620.50 IRAUSD</p>
</dd>
</dl>
</div></blockquote>
<p>Note that the special dict keys ‘currency’ and ‘flag’ are used to
specify which currency to use for the inserted postings, and if set, which flag
to mark these postings with.</p>
<p class="rubric">Functions</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#beancount.plugins.ira_contribs.add_ira_contribs" title="beancount.plugins.ira_contribs.add_ira_contribs"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_ira_contribs</span></code></a>(entries, options_map, …)</p></td>
<td><p>Add legs for 401k employer match contributions.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#beancount.plugins.ira_contribs.add_postings" title="beancount.plugins.ira_contribs.add_postings"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_postings</span></code></a>(entry, amount_, neg_account, …)</p></td>
<td><p>Insert positive and negative postings of a position in an entry.</p></td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="beancount.plugins.ira_contribs.add_ira_contribs">
<code class="sig-prename descclassname">beancount.plugins.ira_contribs.</code><code class="sig-name descname">add_ira_contribs</code><span class="sig-paren">(</span><em class="sig-param">entries</em>, <em class="sig-param">options_map</em>, <em class="sig-param">config_str</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/beancount/plugins/ira_contribs.html#add_ira_contribs"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#beancount.plugins.ira_contribs.add_ira_contribs" title="Permalink to this definition">¶</a></dt>
<dd><p>Add legs for 401k employer match contributions.</p>
<p>See module docstring for an example configuration.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entries</strong> – a list of entry instances</p></li>
<li><p><strong>options_map</strong> – a dict of options parsed from the file</p></li>
<li><p><strong>config_str</strong> – A configuration string, which is intended to be a Python dict
mapping match-accounts to a pair of (negative-account, position-account)
account names.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple of entries and errors.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.plugins.ira_contribs.add_postings">
<code class="sig-prename descclassname">beancount.plugins.ira_contribs.</code><code class="sig-name descname">add_postings</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">amount_</em>, <em class="sig-param">neg_account</em>, <em class="sig-param">pos_account</em>, <em class="sig-param">flag</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/beancount/plugins/ira_contribs.html#add_postings"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#beancount.plugins.ira_contribs.add_postings" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert positive and negative postings of a position in an entry.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry</strong> – A Transaction instance.</p></li>
<li><p><strong>amount_</strong> – An Amount instance to create the position, with positive number.</p></li>
<li><p><strong>neg_account</strong> – An account for the posting with the negative amount.</p></li>
<li><p><strong>pos_account</strong> – An account for the posting with the positive amount.</p></li>
<li><p><strong>flag</strong> – A string, that is to be set as flag for the new postings.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new, modified entry.</p>
</dd>
</dl>
</dd></dl>

</div>


        </div>
      </div>

      <div id="side-menu-container">

        <div id="search" role="search">
        <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
            <input type="text" name="q" placeholder="Search..." />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>
</div>

        <div id="side-menu" role="navigation">

          
  
    
  
  
    <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Beancount Modules</a></li>
</ul>

  


        </div>

        

      </div>

    </div>

<footer>
    <div id="footer-info">
        <ul id="build-details">
            
                <li class="footer-element">
                    
                        <a href="../../_sources/modules/plugins/beancount.plugins.ira_contribs.rst.txt" rel="nofollow"> source</a>
                    
                </li>
            

            

            
        </ul>
        <div id="credit">
            created with <a href="http://sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/Autophagy/insegel">Insegel</a>

        </div>
    </div>

    <a id="menu-toggle" class="fa fa-bars" aria-hidden="true"></a>

    <script type="text/javascript">
      $("#menu-toggle").click(function() {
        $("#menu-toggle").toggleClass("toggled");
        $("#side-menu-container").slideToggle(300);
      });
    </script>

</footer> 

</div>

</body>
</html>